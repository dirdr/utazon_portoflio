@layer base {
  :root {
    /* Mobile viewport units that account for browser UI */
    --vh: 1vh;
    --vw: 1vw;
    --mobile-vh: calc(var(--vh, 1vh) * 100);
  }

  /* Enhanced fallback for older browsers that don't support dvh */
  @supports not (height: 100dvh) {
    .h-dvh,
    .h-\[100dvh\] {
      height: calc(var(--vh, 1vh) * 100);
    }

    .min-h-dvh {
      min-height: calc(var(--vh, 1vh) * 100);
    }

    .max-h-dvh {
      max-height: calc(var(--vh, 1vh) * 100);
    }
  }

  /* Utility for preventing scroll */
  .prevent-scroll {
    overflow: hidden !important;
    touch-action: none !important;
    height: 100dvh !important;
    position: fixed !important;
    width: 100% !important;
  }

  /* Enhanced mobile transition overlay utilities */
  .mobile-fullscreen-overlay {
    /* Use custom viewport height for mobile reliability */
    height: calc(var(--vh, 1vh) * 100) !important;
    min-height: 100vh !important;
    max-height: 100vh !important;

    /* Explicit positioning to override browser defaults */
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;

    /* Ensure full width coverage */
    width: 100vw !important;
    max-width: 100vw !important;

    /* Prevent mobile browser interference */
    transform: translateZ(0) !important;
    backface-visibility: hidden !important;

    /* Force hardware acceleration */
    will-change: opacity !important;
  }

  html,
  body {
    overflow-x: hidden;
  }

  body {
    @apply bg-background text-foreground font-neue;
    /* Ensure proper mobile handling */
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-nord font-bold;
  }

  /* Remove focus outline for mouse users, keep for keyboard users */
  *:focus:not(:focus-visible) {
    outline: none;
  }
}
